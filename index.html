<!DOCTYPE html>
<html>
<head>
    <title>Logseq Bridge</title>
<script>
    window.onload = function() {
        // 1. Grab the "loot" (parameters)
        const urlParams = new URLSearchParams(window.location.search);
        const page = urlParams.get('page') || 'Incoming';
        const title = urlParams.get('title') || 'New Entry';
        const content = urlParams.get('content') || '';

        // 2. Build the "bridge" URL
        const logseqURI = `logseq://x-callback-url/quickCapture?page=${encodeURIComponent(page)}&title=${encodeURIComponent(title)}&content=${encodeURIComponent(content)}`;

        // 3. Launch Logseq
        window.location.href = logseqURI;

        // 4. The "Vanish" (wait 500ms so the protocol doesn't "choke")
        setTimeout(function() {
            window.close();
            // Fallback: if the tab stays "stubborn," show a message
            document.body.innerHTML = "<h1>Sent! You can close this tab now, king.</h1>";
        }, 500);
    };
</script>
</head>
<body>
    <p>Redirecting to Logseq... if it stalls, your "link" might be broken.</p>
</body>
</html>
